<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pulse Morse - Text to Morse Converter</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <div class="background"></div>
    <main class="app">
      <header class="hero">
        <div class="tag-row">
          <p class="tag">MGC237</p>
          <div class="toggle-switch">
            <label class="switch-label">
              <input id="theme-toggle" type="checkbox" class="checkbox" aria-label="Toggle light or dark mode" />
              <span class="slider"></span>
            </label>
          </div>
        </div>
        <h1>Pulse Morse</h1>
        <p class="subtitle">Translate plain text into crisp Morse code with instant feedback.</p>
        <div class="hero-divider" aria-hidden="true"></div>
      </header>

      <section class="panel">
        <div class="panel-header">
          <h2>Converter</h2>
          <span class="status" id="status">Ready.</span>
        </div>

        <div class="grid">
          <div class="field">
            <label for="text-input">Text input</label>
            <textarea id="text-input" placeholder="Type a message like: Hello Chris, meet at 8pm" rows="6"></textarea>
          </div>

          <div class="field">
            <label for="morse-output">Morse output</label>
            <textarea id="morse-output" readonly rows="6" placeholder="Your Morse code appears here"></textarea>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="convert-btn">Convert</button>
          <button class="btn ghost" id="clear-btn">Clear</button>
          <button class="btn outline" id="copy-btn">Copy Morse</button>
          <button class="btn outline" id="save-favorite-btn">ğŸ’¾ Save</button>
          <button class="btn outline" id="share-btn">ğŸ”— Share</button>
        </div>

        <div class="toggle-row">
          <label class="checkbox-label">
            <input type="checkbox" id="realtime-toggle" />
            <span>âš¡ Real-time conversion</span>
          </label>
        </div>

        <div class="note" id="note">
          Unsupported characters are skipped. Words are separated with <span>/</span>.
        </div>

        <div class="divider"></div>

        <div class="panel-header">
          <h2>Decoder</h2>
          <span class="status" id="decode-status">Waiting for Morse.</span>
        </div>

        <div class="grid">
          <div class="field">
            <label for="morse-input">Morse input</label>
            <textarea id="morse-input" placeholder="Example: .... . .-.. .-.. --- / .-- --- .-. .-.. -.." rows="6"></textarea>
          </div>

          <div class="field">
            <label for="text-output">Text output</label>
            <textarea id="text-output" readonly rows="6" placeholder="Decoded text appears here"></textarea>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="decode-btn">Decode</button>
          <button class="btn ghost" id="clear-decode-btn">Clear</button>
        </div>

        <div class="audio-controls">
          <div class="field">
            <label for="speed-range">Playback speed (WPM)</label>
            <div class="range-row">
              <input type="range" id="speed-range" min="8" max="24" value="14" />
              <span id="speed-value">14</span>
            </div>
          </div>
          <div class="sound-customization">
            <div class="field">
              <label for="frequency-range">Frequency (Hz)</label>
              <div class="range-row">
                <input type="range" id="frequency-range" min="400" max="1200" value="700" step="50" />
                <span id="frequency-value">700</span>
              </div>
            </div>
            <div class="field">
              <label for="waveform-select">Waveform</label>
              <select id="waveform-select" class="waveform-select">
                <option value="sine">Sine</option>
                <option value="square">Square</option>
                <option value="triangle">Triangle</option>
                <option value="sawtooth">Sawtooth</option>
              </select>
            </div>
          </div>
          <div class="actions">
            <button class="btn outline" id="play-output-btn">ğŸ”Š Play Morse output</button>
            <button class="btn outline" id="play-input-btn">ğŸ”Š Play Morse input</button>
            <button class="btn outline" id="download-audio-btn">ğŸ“¥ Download Audio</button>
            <button class="btn ghost" id="stop-audio-btn">Stop</button>
          </div>
          <div class="visual-signal" id="visual-signal" aria-hidden="true"></div>
          <div class="morse-animation" id="morse-animation"></div>
        </div>

        <div class="divider"></div>

        <div class="panel-header">
          <h2>ğŸ¯ Interactive Input</h2>
          <span class="status" id="tap-status">Tap to start</span>
        </div>

        <div class="tap-input-section">
          <div class="tap-zone" id="tap-zone">
            <div class="tap-instructions">
              <p>Hold to send DASH (â€”)</p>
              <p>Quick tap for DOT (â€¢)</p>
              <p class="tap-hint">Use spacebar or click here</p>
            </div>
            <div class="tap-output" id="tap-output"></div>
          </div>
          <div class="actions">
            <button class="btn primary" id="tap-clear-btn">Clear Taps</button>
            <button class="btn outline" id="sos-btn">ğŸ†˜ Send SOS</button>
          </div>
        </div>
      </section>

      <section class="panel favorites-panel" id="favorites-panel" style="display: none;">
        <div class="panel-header">
          <h2>ğŸ’¾ Saved Favorites</h2>
          <div class="header-actions">
            <button class="btn outline" id="export-favorites-btn">ğŸ“¤ Export</button>
            <button class="btn outline" id="import-favorites-btn">ğŸ“¥ Import</button>
            <button class="btn ghost" id="clear-favorites-btn">Clear All</button>
          </div>
        </div>
        <div class="favorites-list" id="favorites-list">
          <p class="empty-state">No saved messages yet. Save your frequently used messages!</p>
        </div>
        <input type="file" id="import-file-input" accept=".json" style="display: none;" />
      </section>

      <section class="panel practice-panel" id="practice-panel" style="display: none;">
        <div class="panel-header">
          <h2>ğŸ“ Practice Mode</h2>
          <div class="practice-stats">
            <span id="practice-score">Score: 0</span>
            <span id="practice-streak">Streak: 0</span>
          </div>
        </div>
        <div class="toggle-row">
          <label class="checkbox-label">
            <input type="checkbox" id="reverse-practice-toggle" />
            <span>ğŸ”„ Reverse Mode (Morse â†’ Letter)</span>
          </label>
        </div>
        <div class="practice-content">
          <div class="practice-question">
            <h3 id="practice-question-text">What is the Morse code for:</h3>
            <div class="practice-letter" id="practice-letter">?</div>
          </div>
          <div class="practice-input-area">
            <input type="text" id="practice-input" placeholder="Type the Morse code (e.g., .-)" />
          </div>
          <div class="actions">
            <button class="btn primary" id="practice-submit-btn">Check Answer</button>
            <button class="btn ghost" id="practice-skip-btn">Skip</button>
          </div>
          <div class="practice-feedback" id="practice-feedback"></div>
        </div>
      </section>

      <section class="panel history-panel" id="history-panel" style="display: none;">
        <div class="panel-header">
          <h2>ğŸ“œ Conversion History</h2>
          <button class="btn ghost" id="clear-history-btn">Clear All</button>
        </div>
        <div class="history-list" id="history-list">
          <p class="empty-state">No conversion history yet.</p>
        </div>
      </section>

      <section class="panel stats-panel" id="stats-panel" style="display: none;">
        <div class="panel-header">
          <h2>ğŸ“Š Statistics</h2>
          <button class="btn ghost" id="reset-stats-btn">Reset</button>
        </div>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="stat-conversions">0</div>
            <div class="stat-label">Total Conversions</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-characters">0</div>
            <div class="stat-label">Characters Converted</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-practice">0</div>
            <div class="stat-label">Practice Questions</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="stat-accuracy">0%</div>
            <div class="stat-label">Practice Accuracy</div>
          </div>
        </div>
      </section>

      <div class="quick-actions">
        <button class="btn outline" id="show-favorites-btn">ğŸ’¾ Favorites</button>
        <button class="btn outline" id="show-practice-btn">ğŸ“ Practice Mode</button>
        <button class="btn outline" id="show-history-btn">ğŸ“œ History</button>
        <button class="btn outline" id="show-stats-btn">ğŸ“Š Stats</button>
        <button class="btn outline" id="show-shortcuts-btn">âŒ¨ï¸ Shortcuts</button>
      </div>

      <div class="modal" id="shortcuts-modal" style="display: none;">
        <div class="modal-content">
          <div class="modal-header">
            <h2>âŒ¨ï¸ Keyboard Shortcuts</h2>
            <button class="modal-close" id="close-shortcuts-btn">âœ•</button>
          </div>
          <div class="shortcuts-list">
            <div class="shortcut-item">
              <kbd>Ctrl + Enter</kbd>
              <span>Convert text to Morse</span>
            </div>
            <div class="shortcut-item">
              <kbd>Ctrl + K</kbd>
              <span>Clear all fields</span>
            </div>
            <div class="shortcut-item">
              <kbd>Ctrl + C</kbd>
              <span>Copy Morse code (when focused)</span>
            </div>
            <div class="shortcut-item">
              <kbd>Ctrl + P</kbd>
              <span>Play Morse audio</span>
            </div>
            <div class="shortcut-item">
              <kbd>Ctrl + S</kbd>
              <span>Save to favorites</span>
            </div>
            <div class="shortcut-item">
              <kbd>Ctrl + H</kbd>
              <span>Toggle history</span>
            </div>
            <div class="shortcut-item">
              <kbd>Space</kbd>
              <span>Tap Morse (when not in input)</span>
            </div>
            <div class="shortcut-item">
              <kbd>Esc</kbd>
              <span>Stop audio / Close modals</span>
            </div>
          </div>
        </div>
      </div>

      <section class="legend">
        <h3>Morse quick reference</h3>
        <div class="legend-grid" id="legend-grid"></div>
      </section>
    </main>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
